# V9 ç‰ˆæœ¬æ–°åŠŸèƒ½è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

V9ç‰ˆæœ¬æ–°å¢äº†ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š
1. **LSTM/GRU æ—¶é—´åºåˆ—å¤„ç†** - æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹
2. **å®æ—¶åŠ¨æ€å‚æ•°è°ƒæ•´** - æ ¹æ®æ€§èƒ½è‡ªåŠ¨ä¼˜åŒ–å‚æ•°
3. **è‡ªåŠ¨å­¦ä¹ å‚æ•°ä¼˜åŒ–** - åŸºäºå†å²æ•°æ®çš„è‡ªé€‚åº”å­¦ä¹ 
4. **æ³¨æ„åŠ›æœºåˆ¶** - æå‡æ¨¡å‹å¯¹é‡è¦æ—¶é—´æ­¥çš„å…³æ³¨

## ğŸ§  LSTM/GRU æ—¶é—´åºåˆ—å¤„ç†

### åŠŸèƒ½ç‰¹æ€§

- **å¤šç§æ¨¡å‹ç±»å‹**ï¼š
  - `lstm`: æ ‡å‡†LSTMæ¨¡å‹
  - `gru`: GRUæ¨¡å‹ï¼ˆè®¡ç®—æ›´å¿«ï¼‰
  - `lstm_attention`: å¸¦æ³¨æ„åŠ›æœºåˆ¶çš„LSTM

- **æ—¶é—´åºåˆ—é¢„æµ‹**ï¼š
  - å•æ­¥é¢„æµ‹ï¼šé¢„æµ‹ä¸‹ä¸€ä¸ªæ—¶é—´æ­¥çš„ä»·æ ¼
  - å¤šæ­¥é¢„æµ‹ï¼šå¯æ‰©å±•æ”¯æŒå¤šæ­¥é¢„æµ‹
  - ç‰¹å¾æå–ï¼šæå–æ—¶é—´åºåˆ—çš„é«˜çº§ç‰¹å¾

- **æ•°æ®é¢„å¤„ç†**ï¼š
  - è‡ªåŠ¨å½’ä¸€åŒ–ï¼ˆMinMaxã€Z-Scoreï¼‰
  - åºåˆ—ç”Ÿæˆï¼šè‡ªåŠ¨åˆ›å»ºè®­ç»ƒåºåˆ—
  - åå½’ä¸€åŒ–ï¼šå°†é¢„æµ‹ç»“æœè¿˜åŸåˆ°åŸå§‹å°ºåº¦

### é…ç½®å‚æ•°

```python
LSTM_MODEL_TYPE = 'lstm_attention'  # 'lstm', 'gru', 'lstm_attention'
LSTM_SEQ_LENGTH = 60  # è¾“å…¥åºåˆ—é•¿åº¦
LSTM_HIDDEN_SIZE = 64  # éšè—å±‚å¤§å°
LSTM_NUM_LAYERS = 2  # å±‚æ•°
```

### ä½¿ç”¨ç¤ºä¾‹

```python
from lstm_gru_time_series import TimeSeriesProcessor

# åˆ›å»ºå¤„ç†å™¨
processor = TimeSeriesProcessor(
    model_type='lstm_attention',
    seq_length=60,
    hidden_size=64,
    num_layers=2
)

# å‡†å¤‡æ•°æ®
data = np.array([...])  # æ—¶é—´åºåˆ—æ•°æ®

# å½’ä¸€åŒ–
normalized_data, norm_params = processor.normalize(data)

# åˆ›å»ºåºåˆ—
X, y = processor.create_sequences(normalized_data)

# è®­ç»ƒ
history = processor.train(X, y, epochs=100)

# é¢„æµ‹
prediction = processor.predict_next(data)
```

## ğŸ”§ å®æ—¶åŠ¨æ€å‚æ•°è°ƒæ•´

### åŠŸèƒ½ç‰¹æ€§

- **å¤šç§ä¼˜åŒ–æ–¹æ³•**ï¼š
  - `bayesian`: è´å¶æ–¯ä¼˜åŒ–ï¼ˆæ¨èï¼‰
  - `gradient`: åŸºäºæ¢¯åº¦çš„ä¼˜åŒ–
  - `random`: éšæœºæœç´¢

- **å‚æ•°èŒƒå›´å®šä¹‰**ï¼š
  - è¿ç»­å‚æ•°ï¼šæ”¯æŒæµ®ç‚¹æ•°èŒƒå›´
  - ç¦»æ•£å‚æ•°ï¼šæ”¯æŒå›ºå®šæ­¥é•¿
  - æ•´æ•°å‚æ•°ï¼šæ”¯æŒæ•´æ•°èŒƒå›´

- **æ€§èƒ½è·Ÿè¸ª**ï¼š
  - æ»‘åŠ¨çª—å£ï¼šè·Ÿè¸ªæœ€è¿‘Næ¬¡æ€§èƒ½
  - è¶‹åŠ¿åˆ†æï¼šè®¡ç®—æ€§èƒ½å˜åŒ–è¶‹åŠ¿
  - æœ€ä½³å‚æ•°è®°å½•ï¼šè‡ªåŠ¨ä¿å­˜å†å²æœ€ä½³å‚æ•°

### é…ç½®ç¤ºä¾‹

```python
from dynamic_parameter_optimizer import DynamicParameterOptimizer, ParameterRange

# å®šä¹‰å‚æ•°èŒƒå›´
parameter_ranges = {
    'kdj_period': ParameterRange(5, 14, param_type='integer'),
    'rsi_period': ParameterRange(10, 20, param_type='integer'),
    'lstm_hidden_size': ParameterRange(32, 128, param_type='integer'),
    'learning_rate': ParameterRange(0.0001, 0.01, param_type='continuous')
}

# åˆ›å»ºä¼˜åŒ–å™¨
optimizer = DynamicParameterOptimizer(
    parameter_ranges=parameter_ranges,
    optimization_method='bayesian',
    adaptation_rate=0.1,  # å‚æ•°è°ƒæ•´é€Ÿåº¦
    exploration_rate=0.2,  # æ¢ç´¢æ¦‚ç‡
    performance_window=100  # æ€§èƒ½è·Ÿè¸ªçª—å£
)

# å»ºè®®å‚æ•°
suggested_params = optimizer.suggest_parameters()

# æ›´æ–°æ€§èƒ½
optimizer.update_performance(performance_score, suggested_params)
```

## ğŸ“ è‡ªåŠ¨å­¦ä¹ å‚æ•°ä¼˜åŒ–

### åŠŸèƒ½ç‰¹æ€§

- **è‡ªé€‚åº”å­¦ä¹ **ï¼š
  - å­¦ä¹ ç‡è°ƒæ•´ï¼šåŠ¨æ€è°ƒæ•´å­¦ä¹ ç‡
  - åŠ¨é‡æœºåˆ¶ï¼šåŠ é€Ÿæ”¶æ•›
  - è¡°å‡ç­–ç•¥ï¼šé˜²æ­¢è¿‡æ‹Ÿåˆ

- **å­¦ä¹ å†å²**ï¼š
  - æ€§èƒ½ç»Ÿè®¡ï¼šå¹³å‡ã€æœ€ä½³ã€æ ‡å‡†å·®
  - å‚æ•°è½¨è¿¹ï¼šè®°å½•å‚æ•°å˜åŒ–å†å²
  - å­¦ä¹ ç‡å†å²ï¼šè·Ÿè¸ªå­¦ä¹ ç‡å˜åŒ–

### ä½¿ç”¨ç¤ºä¾‹

```python
from dynamic_parameter_optimizer import AutoLearningOptimizer

# åˆ›å»ºè‡ªåŠ¨å­¦ä¹ ä¼˜åŒ–å™¨
auto_learner = AutoLearningOptimizer(
    parameter_optimizer=optimizer,
    learning_rate=0.01,
    momentum=0.9,
    decay_rate=0.99
)

# æ‰§è¡Œå­¦ä¹ æ­¥éª¤
next_params = auto_learner.learn_step(performance, current_params)

# è·å–å­¦ä¹ ç»Ÿè®¡
stats = auto_learner.get_learning_statistics()
print(f"å½“å‰æ€§èƒ½: {stats['current_performance']}")
print(f"å¹³å‡æ€§èƒ½: {stats['average_performance']}")
print(f"å­¦ä¹ ç‡: {stats['learning_rate']}")
```

## ğŸ‘ï¸ æ³¨æ„åŠ›æœºåˆ¶

### åŠŸèƒ½ç‰¹æ€§

- **æ—¶é—´æ­¥æ³¨æ„åŠ›**ï¼šè‡ªåŠ¨å…³æ³¨é‡è¦çš„æ—¶é—´æ­¥
- **æƒé‡å¯è§†åŒ–**ï¼šå¯ä»¥æŸ¥çœ‹æ³¨æ„åŠ›æƒé‡åˆ†å¸ƒ
- **æå‡é¢„æµ‹ç²¾åº¦**ï¼šé€šè¿‡æ³¨æ„åŠ›æœºåˆ¶æå‡æ¨¡å‹è¡¨ç°

### ä½¿ç”¨ç¤ºä¾‹

```python
# ä½¿ç”¨å¸¦æ³¨æ„åŠ›æœºåˆ¶çš„LSTM
processor = TimeSeriesProcessor(
    model_type='lstm_attention',
    seq_length=60,
    hidden_size=64
)

# è®­ç»ƒå’Œé¢„æµ‹ï¼ˆè‡ªåŠ¨ä½¿ç”¨æ³¨æ„åŠ›æœºåˆ¶ï¼‰
# ...

# è·å–æ³¨æ„åŠ›æƒé‡
predictions, attention_weights = processor.predict(X, return_attention=True)

# å¯è§†åŒ–æ³¨æ„åŠ›æƒé‡
print("æ³¨æ„åŠ›æƒé‡:", attention_weights)
```

## ğŸ“Š æ€§èƒ½è¯„åˆ†ç³»ç»Ÿ

### è¯„åˆ†å…¬å¼

```python
score = (prediction_accuracy * 0.4 + 
         profit_normalized * 0.4 + 
         risk_score * 0.2)
```

- **é¢„æµ‹å‡†ç¡®ç‡** (40%)ï¼šæ¨¡å‹é¢„æµ‹çš„å‡†ç¡®æ€§
- **ç›ˆåˆ©æ ‡å‡†åŒ–** (40%)ï¼šå®é™…ç›ˆåˆ©æƒ…å†µ
- **é£é™©æ§åˆ¶** (20%)ï¼šé£é™©æŒ‡æ ‡ï¼ˆè¶Šä½è¶Šå¥½ï¼‰

### è‡ªå®šä¹‰æ€§èƒ½æŒ‡æ ‡

å¯ä»¥åœ¨ `calculate_performance_score` å‡½æ•°ä¸­è‡ªå®šä¹‰æ€§èƒ½è®¡ç®—æ–¹å¼ã€‚

## ğŸ”„ é›†æˆåˆ°ä¸»ç³»ç»Ÿ

### V9ä¸»æ–‡ä»¶ç‰¹æ€§

1. **è‡ªåŠ¨åˆå§‹åŒ–**ï¼šæ‰€æœ‰æ¨¡å—è‡ªåŠ¨åˆå§‹åŒ–
2. **å®¹é”™å¤„ç†**ï¼šæ¨¡å—å¤±è´¥ä¸å½±å“å…¶ä»–åŠŸèƒ½
3. **å®æ—¶ä¼˜åŒ–**ï¼šæ¯è½®å¾ªç¯è‡ªåŠ¨ä¼˜åŒ–å‚æ•°
4. **æ€§èƒ½è·Ÿè¸ª**ï¼šæŒç»­è·Ÿè¸ªå’Œè®°å½•æ€§èƒ½

### è¿è¡ŒV9ç³»ç»Ÿ

```bash
python real_time_predict_v9.py
```

### é…ç½®é€‰é¡¹

åœ¨ `real_time_predict_v9.py` ä¸­å¯ä»¥é…ç½®ï¼š

```python
# å¯ç”¨/ç¦ç”¨åŠŸèƒ½
ENABLE_LSTM_PREDICTION = True
ENABLE_DYNAMIC_OPTIMIZATION = True

# LSTMé…ç½®
LSTM_MODEL_TYPE = 'lstm_attention'
LSTM_SEQ_LENGTH = 60
LSTM_HIDDEN_SIZE = 64

# ä¼˜åŒ–é…ç½®
OPTIMIZATION_PARAMETERS = {
    'kdj_period': ParameterRange(5, 14, param_type='integer'),
    'rsi_period': ParameterRange(10, 20, param_type='integer'),
    # ... æ›´å¤šå‚æ•°
}
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **åºåˆ—é•¿åº¦**ï¼š
   - çŸ­æœŸé¢„æµ‹ï¼š30-60æ­¥
   - ä¸­æœŸé¢„æµ‹ï¼š60-120æ­¥
   - é•¿æœŸé¢„æµ‹ï¼š120+æ­¥

2. **éšè—å±‚å¤§å°**ï¼š
   - ç®€å•æ•°æ®ï¼š32-64
   - å¤æ‚æ•°æ®ï¼š64-128
   - éå¸¸å¤æ‚ï¼š128-256

3. **ä¼˜åŒ–é¢‘ç‡**ï¼š
   - é«˜é¢‘äº¤æ˜“ï¼šæ¯10-20è½®ä¼˜åŒ–ä¸€æ¬¡
   - ä¸­é¢‘äº¤æ˜“ï¼šæ¯50-100è½®ä¼˜åŒ–ä¸€æ¬¡
   - ä½é¢‘äº¤æ˜“ï¼šæ¯å¤©ä¼˜åŒ–ä¸€æ¬¡

4. **æ¢ç´¢ç‡**ï¼š
   - åˆæœŸï¼š0.3-0.5ï¼ˆæ›´å¤šæ¢ç´¢ï¼‰
   - ä¸­æœŸï¼š0.2-0.3ï¼ˆå¹³è¡¡ï¼‰
   - åæœŸï¼š0.1-0.2ï¼ˆæ›´å¤šåˆ©ç”¨ï¼‰

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è®¡ç®—èµ„æº**ï¼š
   - LSTM/GRUè®­ç»ƒéœ€è¦ä¸€å®šè®¡ç®—èµ„æº
   - å»ºè®®ä½¿ç”¨GPUåŠ é€Ÿï¼ˆå¦‚æœå¯ç”¨ï¼‰

2. **è®­ç»ƒæ•°æ®**ï¼š
   - éœ€è¦è¶³å¤Ÿçš„å†å²æ•°æ®
   - å»ºè®®è‡³å°‘æ˜¯åºåˆ—é•¿åº¦çš„2å€

3. **å‚æ•°ç¨³å®šæ€§**ï¼š
   - é¿å…é¢‘ç¹å¤§å¹…è°ƒæ•´å‚æ•°
   - ä½¿ç”¨é€‚åº”ç‡æ§åˆ¶è°ƒæ•´å¹…åº¦

4. **è¿‡æ‹Ÿåˆé£é™©**ï¼š
   - ç›‘æ§éªŒè¯é›†æŸå¤±
   - ä½¿ç”¨Dropouté˜²æ­¢è¿‡æ‹Ÿåˆ

## ğŸš€ åç»­ä¼˜åŒ–æ–¹å‘

1. æ”¯æŒæ›´å¤šæ¨¡å‹ç±»å‹ï¼ˆTransformerã€CNN-LSTMç­‰ï¼‰
2. é›†æˆåœ¨çº¿å­¦ä¹ ï¼ˆå¢é‡å­¦ä¹ ï¼‰
3. å¤šä»»åŠ¡å­¦ä¹ ï¼ˆåŒæ—¶é¢„æµ‹ä»·æ ¼å’Œæˆäº¤é‡ï¼‰
4. é›†æˆå­¦ä¹ ï¼ˆå¤šä¸ªæ¨¡å‹ç»„åˆï¼‰
5. è‡ªåŠ¨è¶…å‚æ•°æœç´¢ï¼ˆAutoMLï¼‰

