# V7 用户自选股专属版

## 🎯 版本定位

**V7 = 你的自选股 + V6差异化策略 + 10万初始资金**

专门为你的实际持仓设计！

---

## 💼 你的自选股组合

### 完整列表（12只）

| 序号 | 代码 | 名称 | 类别 | 波动性 | 类型 |
|------|------|------|------|--------|------|
| 1 | 600036 | 招商银行 | 金融 | 低 | 个股 |
| 2 | 601838 | 成都银行 | 金融 | 低 | 个股 |
| 3 | 601318 | 中国平安 | 金融 | 中 | 个股 |
| 4 | 601939 | 建设银行 | 金融 | 低 | 个股 |
| 5 | 601398 | 工商银行 | 金融 | 低 | 个股 |
| 6 | 513750 | 港股通非银ETF | 金融 | 中 | ETF |
| 7 | 000858 | 五粮液 | 消费 | 中 | 个股 |
| 8 | 159928 | 消费ETF | 消费 | 中 | ETF |
| 9 | 588000 | 科创50 | 科技 | 高 | ETF |
| 10 | 588760 | 人工智能ETF | 科技 | 高 | ETF |
| 11 | 516080 | 创新药ETF | 医药 | 高 | ETF |
| 12 | 515210 | 钢铁ETF | 周期 | 中 | ETF |

### 组合特点分析

```
板块分布：
  金融：6只（50%）← 稳健为主
  消费：2只（17%）
  科技：2只（17%）
  医药：1只（8%）
  周期：1只（8%）

风格分布：
  稳健型：5只（42%）
  平衡型：5只（42%）
  激进型：2只（16%）

标的类型：
  个股：6只（50%）
  ETF：6只（50%）
```

**结论**：**稳健偏防守型组合**，金融股占比高，适合长期稳定增长。

---

## 🆕 V7 vs V6 关键差异

| 特性 | V6 | **V7** |
|------|-----|--------|
| **标的来源** | 通用选股 | **用户实际自选** ⭐ |
| **标的数量** | 19只 | **12只** |
| **初始资金** | 1万 | **10万** ⭐ |
| **金融股占比** | 21% | **50%** ⭐ |
| **稳健型占比** | 16% | **42%** ⭐ |
| **整体风格** | 均衡 | **稳健防守** ⭐ |
| **高价股支持** | 不支持 | **支持（五粮液等）** ⭐ |

### V7核心优势

1. **针对性强** ⭐⭐⭐⭐⭐
   ```
   完全基于你的实际持仓
   训练结果可以直接指导你的交易决策
   ```

2. **支持高价股** ⭐⭐⭐⭐⭐
   ```
   10万初始资金
   五粮液（~120元/股）可以交易
   不会出现"未交易"问题
   ```

3. **稳健风格** ⭐⭐⭐⭐⭐
   ```
   金融股占比50%
   预期回撤更低
   更适合长期持有
   ```

---

## 🚀 快速开始

### 三步启动

```bash
# 第一步：下载数据（5-10分钟）
python get_stock_data_v7_myportfolio.py

# 第二步：开始训练（3-4小时）
python train_v7.py

# 第三步：查看结果（自动）
# 训练完成后自动显示分类统计
```

---

## 📊 预期效果

### 整体预期

基于V6经验 + 你的组合特点：

```
平均收益率: 18-25%
  - 金融板块: 12-18%（稳定）
  - 消费板块: 15-25%
  - 科技板块: 25-40%（波动）
  - 医药/周期: 20-30%

平均最大回撤: 5-8%
  - 金融主导，回撤控制极佳
  - 比V6（5.84%）可能略高（有高波动ETF）

平均夏普比率: 1.4-1.8
  - 稳健风格，风险收益比好

总交易次数: 60-100
  - 12只标的，适中

风险事件: 2500-3000次
  - 风险监控正常
```

### 分板块预期

#### 金融板块（6只，核心）⭐⭐⭐⭐⭐

```
预期收益: 12-18%
预期回撤: 3-6%
预期夏普: 1.5-2.0

明星股：
  招商银行：+10-15%，回撤<5%
  建设银行：+10-15%，回撤<5%
  中国平安：+5-10%，波动稍大

特点：稳定、低回撤、可靠
策略：满仓策略（低波动，风险阈值2）
```

#### 消费板块（2只）⭐⭐⭐⭐

```
预期收益: 15-25%
预期回撤: 5-10%

五粮液：
  V6完全未交易（资金不足）
  V7可交易：+15-25%（预期）
  
消费ETF：
  V6: +11.52%
  V7: 预期相似

特点：V7最大改进！五粮液终于能交易了
```

#### 科技板块（2只）⭐⭐⭐

```
预期收益: 25-40%
预期回撤: 10-20%

科创50：
  新增标的，高波动
  预期：+30-50%
  
人工智能ETF：
  新增标的，高波动
  预期：+20-40%

特点：高风险高收益，激进策略
```

---

## 💡 V7的独特价值

### 1. 实战指导意义 ⭐⭐⭐⭐⭐

```
V6/V5：通用模型，可能不适合你的股票
V7：专门训练你的自选股

直接指导：
  - 什么时候买入招商银行
  - 什么时候卖出五粮液
  - 科创50什么时候进场
  
→ 实战价值极高！
```

### 2. 解决高价股问题 ⭐⭐⭐⭐⭐

```
V6问题：
  茅台、五粮液、宁德时代等高价股
  初始资金1万 × 100股 = 买不起
  → 完全不交易

V7解决：
  初始资金10万
  五粮液 120元 × 100股 = 1.2万 ✅
  茅台 1500元 × 100股 = 15万（还是买不起，但更接近）
  
→ 大部分高价股都能交易了！
```

### 3. 风格匹配 ⭐⭐⭐⭐⭐

```
你的组合特点：
  金融50% + 消费17% = 稳健为主
  
V7自动适配：
  金融股：低风险阈值（2），满仓策略
  消费股：中风险阈值（3），90%仓位
  科技股：高风险阈值（4），80%仓位
  
→ 差异化策略完美匹配你的风格！
```

---

## 🎯 使用场景

### 场景1：实盘决策辅助 ⭐⭐⭐⭐⭐

```
你的目标：
  "明天招商银行要不要买入？"
  "五粮液要不要止损？"
  
V7帮助：
  1. 训练后查看招商银行的交易信号
  2. 风险事件触发时，模型如何操作
  3. 对比模型策略和你的直觉
  
→ AI辅助决策，提高胜率
```

### 场景2：组合再平衡 ⭐⭐⭐⭐

```
你的问题：
  "金融股占比50%是否太高？"
  "要不要加仓科技股？"
  
V7帮助：
  1. 训练后查看各板块收益贡献
  2. 看模型对各类股票的交易频率
  3. 优化仓位配置
  
→ 数据驱动的组合优化
```

### 场景3：风险预警 ⭐⭐⭐⭐⭐

```
你的需求：
  "科创50风险太高，要不要减仓？"
  "五粮液跌了10%，是止损还是加仓？"
  
V7帮助：
  1. 实时风险等级评估
  2. 模型的历史风险应对
  3. 回撤控制策略
  
→ 风险管理助手
```

---

## ⚙️ 高级配置

### 调整初始资金（如果需要）

编辑 `train_v7.py`：

```python
# 第19行左右
INITIAL_BALANCE_V7 = 100000  # 10万

# 可以改为：
INITIAL_BALANCE_V7 = 200000  # 20万（如果资金更多）
INITIAL_BALANCE_V7 = 50000   # 5万（小资金）
```

### 添加/移除自选股

编辑 `get_stock_data_v7_myportfolio.py`：

```python
stocks = [
    # 原有的...
    
    # 添加你的新自选股
    {"code": "sh.600519", "name": "贵州茅台", 
     "category": "消费", "volatility": "中", "style": "平衡"},
    
    # 注释掉不想要的
    # {"code": "sh.601398", "name": "工商银行", ...},
]
```

然后重新下载和训练：
```bash
python get_stock_data_v7_myportfolio.py
python train_v7.py
```

---

## 📈 与其他版本对比

### V5 vs V6 vs V7

| 指标 | V5 | V6 | **V7** |
|------|-----|-----|--------|
| **定位** | 通用风险感知 | 通用差异化 | **你的专属** |
| **收益预期** | 28.83% | 16.01% | **18-25%** |
| **回撤预期** | 10.06% | 5.84% | **5-8%** |
| **夏普预期** | 1.47 | 1.21 | **1.4-1.8** |
| **标的数** | 8 | 19 | **12** |
| **初始资金** | 1万 | 1万 | **10万** ⭐ |
| **实战价值** | ⭐⭐⭐ | ⭐⭐⭐ | **⭐⭐⭐⭐⭐** |
| **高价股** | ❌ | ❌ | **✅** |

### 选择建议

```
选V5：
  - 追求高收益（28%+）
  - 不介意较大回撤（10%）
  - 通用策略

选V6：
  - 极致风控（5.84%回撤）
  - 多标的分散
  - 通用策略

选V7：← 强烈推荐！
  - 基于你的实际持仓 ⭐⭐⭐⭐⭐
  - 直接指导实战决策
  - 支持高价股
  - 稳健收益 + 低回撤
```

---

## 🔍 训练后如何使用

### 1. 实时预测

```python
from stable_baselines3 import PPO
from stock_env_v6 import StockTradingEnv

# 加载V7模型
model = PPO.load("ppo_stock_v7.zip")

# 测试你关心的股票
env = StockTradingEnv("stockdata_v7/test/sh.600036.招商银行.csv", 
                      initial_balance=100000)
obs, _ = env.reset()

# 获取交易建议
action, _ = model.predict(obs, deterministic=True)
print(f"招商银行当前建议动作: {action}")
# 0=持有, 1=买25%, 2=买50%, 3=买100%, 4=卖25%, 5=卖50%, 6=卖100%
```

### 2. 批量评估

训练完成后会自动显示所有12只股票的表现，重点关注：

```
你最关心的股票表现：
  招商银行：收益XX%，回撤XX%
  五粮液：收益XX%，回撤XX%
  科创50：收益XX%，回撤XX%

→ 对比你的实际持仓收益
→ 看模型是否跑赢你
```

### 3. 查看训练曲线

```bash
tensorboard --logdir=./logs_v7/
# 浏览器打开 http://localhost:6006

重点看：
  eval/mean_reward：评估奖励趋势
  train/loss：训练损失
  train/entropy_loss：探索程度
```

---

## ⚠️ 重要提示

### 1. 数据时效性

```
训练数据：截至2024-12-31
测试数据：2025年至今

建议：
  - 每季度重新训练一次
  - 市场环境大变时重新训练
  - 自选股调整后重新训练
```

### 2. 实盘使用

```
⚠️ 模型仅供参考，不构成投资建议！

建议流程：
  1. 模拟盘测试1-3个月
  2. 小资金实盘（10-20%）
  3. 逐步增加仓位
  4. 持续监控和调整
```

### 3. ETF数据问题

```
部分ETF（深交所）可能无数据：
  - 513750 港股通非银
  - 159928 消费ETF
  - 516080 创新药ETF
  - 515210 钢铁ETF

如果下载失败：
  → 使用个股替代
  → 或只训练成功下载的标的
```

---

## 🎉 V7总结

### 核心价值

```
V7 = 为你量身定制的交易AI

不是通用模型
而是专门学习"你的股票"的AI

最适合：
  ✅ 有固定自选股池
  ✅ 想要AI辅助决策
  ✅ 需要风险控制
  ✅ 持有高价股（五粮液等）
  ✅ 偏好稳健风格
```

### 立即开始

```bash
# 1. 下载你的自选股数据
python get_stock_data_v7_myportfolio.py

# 2. 训练专属模型
python train_v7.py

# 3. 等待3-4小时

# 4. 查看你的12只股票的AI交易表现！
```

### 预期成果

```
训练完成后你将得到：
  ✅ 12只自选股的AI交易策略
  ✅ 每只股票的预期收益和风险
  ✅ 最佳/最差标的识别
  ✅ 板块配置建议
  ✅ 实时交易信号生成器

→ 你的专属AI交易顾问！
```

---

## 📞 技术支持

### 常见问题

**Q: ETF数据下载失败怎么办？**  
A: 部分深交所ETF baostock不支持，可以移除或用个股替代。

**Q: 训练要多久？**  
A: 约3-4小时（250万步，12只标的）。

**Q: 可以用更少的标的吗？**  
A: 可以！至少保留8-10只即可。

**Q: 如何更新自选股？**  
A: 编辑 `get_stock_data_v7_myportfolio.py`，重新下载和训练。

**Q: 模型能实时用吗？**  
A: 可以！训练后用于实时决策，但需要人工判断。

---

**V7 - 为你的自选股量身打造！** 🎯💼📈

**立即开始，训练你的专属AI交易助手！** 🚀

```bash
python get_stock_data_v7_myportfolio.py
python train_v7.py
```



