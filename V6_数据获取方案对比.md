# V6 数据获取方案对比

## 📊 问题说明

运行原始 `get_stock_data_v6.py` 时遇到：
- ✅ 5只个股成功（浦发、招商、孚日、广合、江淮）
- ❌ 12只ETF失败（全部返回"无数据"）

**原因**：**baostock对ETF支持有限**，特别是：
- 深交所ETF（sz.159xxx）
- 上交所部分ETF（sh.5xxxxx）
- 港股通ETF

---

## 🎯 三种解决方案

### 方案1：使用AkShare（推荐）⭐⭐⭐⭐⭐

**文件**：`get_stock_data_v6_akshare.py`

**优点**：
- ✅ 支持ETF（包括深交所、上交所）
- ✅ 数据更全面
- ✅ 保留原始V6设计（17只标的）
- ✅ 免费，无需注册

**缺点**：
- ⚠️ 需要安装新依赖
- ⚠️ API可能偶尔不稳定

**安装**：
```bash
pip install akshare
```

**运行**：
```bash
python get_stock_data_v6_akshare.py
```

**适合**：
- 想要ETF数据
- 追求数据完整性
- 不介意安装新库

---

### 方案2：使用个股替代（稳妥）⭐⭐⭐⭐

**文件**：`get_stock_data_v6_stocks_only.py`

**优点**：
- ✅ 使用baostock（无需新依赖）
- ✅ 全部个股，成功率高
- ✅ 19只优质标的
- ✅ 覆盖所有主要行业

**缺点**：
- ⚠️ 放弃ETF（改用行业代表股）
- ⚠️ 个股波动可能比ETF大

**标的列表**：
```
金融（4只）：浦发、招商、兴业、平安
科技（5只）：中兴通讯、海康威视、东方财富、广合科技、中芯国际
消费（3只）：茅台、五粮液、美的
医药（2只）：爱尔眼科、恒瑞医药
新能源（2只）：宁德时代、隆基绿能
周期（3只）：孚日股份、江淮汽车、北方稀土
```

**运行**：
```bash
python get_stock_data_v6_stocks_only.py
```

**适合**：
- 想要稳定获取数据
- 不介意放弃ETF
- 喜欢个股交易

---

### 方案3：使用当前成功的5只（保守）⭐⭐⭐

**文件**：继续使用现有数据

**优点**：
- ✅ 已有数据，立即可用
- ✅ 无需额外操作

**缺点**：
- ❌ 只有5只标的（太少）
- ❌ 缺乏多样性
- ❌ 不足以支撑V6的差异化策略

**适合**：
- 快速测试
- 临时方案

---

## 📋 详细对比

| 指标 | 方案1 (AkShare) | 方案2 (个股) | 方案3 (现有) |
|------|----------------|-------------|-------------|
| **标的数量** | 17 | 19 | 5 |
| **ETF支持** | ✅ | ❌ | 部分 |
| **数据稳定性** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **安装依赖** | 需要akshare | 无需新依赖 | 无需 |
| **行业覆盖** | 全面 | 全面 | 不足 |
| **推荐度** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐ |

---

## 🚀 推荐使用流程

### 首选：方案1 (AkShare)

```bash
# 1. 安装AkShare
pip install akshare

# 2. 运行新脚本
python get_stock_data_v6_akshare.py

# 3. 如果成功（获得>=10只），继续训练
python train_v6.py

# 4. 如果失败，尝试方案2
```

### 备选：方案2 (个股)

```bash
# 1. 直接运行（无需新依赖）
python get_stock_data_v6_stocks_only.py

# 2. 训练
python train_v6.py
```

---

## 🔍 方案1详解 (AkShare)

### 安装AkShare

```bash
pip install akshare
```

如果网络问题，使用国内镜像：
```bash
pip install akshare -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### AkShare优势

1. **ETF支持好**
   - 深交所ETF (sz.159xxx) ✅
   - 上交所ETF (sh.5xxxxx) ✅
   - 港股通ETF ✅

2. **数据丰富**
   - 历史数据完整
   - 实时更新
   - 免费使用

3. **易于使用**
   - 简单API
   - 中文文档
   - 活跃社区

### 运行示例

```bash
python get_stock_data_v6_akshare.py
```

**预期输出**：
```
V6 数据获取（使用AkShare）
总共 17 只标的

[科技] 下载 sh.513180 (恒生科技)
  [成功] 获取 1024 条数据
  [保存] 训练: 809 | 测试: 215

[科技] 下载 sh.512480 (半导体ETF)
  [成功] 获取 1376 条数据
  [保存] 训练: 1161 | 测试: 215

...

成功: 15 只
失败: 2 只

[完成] 可以开始训练：
  python train_v6.py
```

---

## 🔍 方案2详解 (个股)

### 标的详情

#### 金融板块（4只）

| 代码 | 名称 | 特点 |
|------|------|------|
| sh.600000 | 浦发银行 | 大型银行 |
| sh.600036 | 招商银行 | 优质银行 |
| sh.601166 | 兴业银行 | 股份制银行 |
| sh.601318 | 中国平安 | 保险龙头 |

#### 科技板块（5只）

| 代码 | 名称 | 特点 |
|------|------|------|
| sz.000063 | 中兴通讯 | 5G设备 |
| sz.002415 | 海康威视 | 安防龙头 |
| sz.300059 | 东方财富 | 互联网金融 |
| sz.001389 | 广合科技 | 新股 |
| sh.688981 | 中芯国际 | 芯片制造 |

#### 消费板块（3只）

| 代码 | 名称 | 特点 |
|------|------|------|
| sh.600519 | 贵州茅台 | 白酒龙头 |
| sz.000858 | 五粮液 | 白酒 |
| sz.000333 | 美的集团 | 家电龙头 |

#### 医药板块（2只）

| 代码 | 名称 | 特点 |
|------|------|------|
| sz.300015 | 爱尔眼科 | 医疗服务 |
| sh.600276 | 恒瑞医药 | 创新药 |

#### 新能源（2只）

| 代码 | 名称 | 特点 |
|------|------|------|
| sz.300750 | 宁德时代 | 电池龙头 |
| sh.601012 | 隆基绿能 | 光伏龙头 |

#### 周期板块（3只）

| 代码 | 名称 | 特点 |
|------|------|------|
| sz.002083 | 孚日股份 | 纺织 |
| sh.600418 | 江淮汽车 | 汽车 |
| sh.600111 | 北方稀土 | 稀土 |

### 运行示例

```bash
python get_stock_data_v6_stocks_only.py
```

**预期输出**：
```
总共 19 只标的（全部为个股）

按类别分布:
  - 金融: 4只
  - 科技: 5只
  - 消费: 3只
  - 医药: 2只
  - 新能源: 2只
  - 周期: 3只

[金融] 查询 sh.600000 (浦发银行)
  [成功] 获取 6309 条数据
  [保存] 训练: 6094 | 测试: 215

...

成功: 19 只
失败: 0 只
```

---

## ⚠️ 常见问题

### Q1: AkShare安装失败

**A**: 使用国内镜像
```bash
pip install akshare -i https://mirrors.aliyun.com/pypi/simple/
```

### Q2: AkShare获取数据很慢

**A**: 
- 网络问题，多试几次
- 或使用方案2（个股）

### Q3: 个股数据也失败

**A**: 
- 检查网络连接
- 确认baostock服务正常
- 尝试其他时间段

### Q4: 部分标的失败怎么办

**A**: 
- 只要成功>=10只即可训练
- 编辑脚本，移除失败的标的
- 或添加其他标的

### Q5: 如何添加自己的标的

**编辑对应脚本**：
```python
stocks = [
    # ... 原有的 ...
    
    # 添加你的
    {"code": "sh.600309", "name": "万华化学", 
     "category": "周期", "volatility": "中", "style": "平衡"},
]
```

---

## 🎯 最终建议

### 场景1：追求完整V6体验

```
推荐：方案1 (AkShare)
理由：支持ETF，最接近原始设计
步骤：
  1. pip install akshare
  2. python get_stock_data_v6_akshare.py
  3. python train_v6.py
```

### 场景2：追求稳定性

```
推荐：方案2 (个股)
理由：baostock对个股支持好，成功率高
步骤：
  1. python get_stock_data_v6_stocks_only.py
  2. python train_v6.py
```

### 场景3：快速测试

```
推荐：方案3 (现有5只)
理由：已有数据，立即可用
步骤：
  1. python train_v6.py（直接训练）
注意：效果可能不佳（标的太少）
```

---

## 📊 预期效果对比

| 方案 | 标的数 | 数据质量 | 训练时间 | 预期收益 |
|------|--------|---------|---------|---------|
| **方案1** | 17 | ⭐⭐⭐⭐⭐ | 3-4小时 | 30-35% |
| **方案2** | 19 | ⭐⭐⭐⭐⭐ | 3-4小时 | 30-40% |
| **方案3** | 5 | ⭐⭐⭐⭐ | 1-2小时 | 20-25% |

---

## 🚀 立即行动

### 我的推荐（按优先级）

1. **首选：方案1 (AkShare)** ⭐⭐⭐⭐⭐
   ```bash
   pip install akshare
   python get_stock_data_v6_akshare.py
   ```

2. **备选：方案2 (个股)** ⭐⭐⭐⭐
   ```bash
   python get_stock_data_v6_stocks_only.py
   ```

3. **临时：方案3 (现有)** ⭐⭐
   ```bash
   # 直接训练，但效果可能不佳
   python train_v6.py
   ```

---

## 📚 相关文档

- `README_V6.md` - V6完整文档
- `快速开始_V6.md` - 快速开始指南
- `版本演进总览_V3_to_V6.md` - 版本对比

---

## 🎉 总结

**问题**：baostock不支持ETF  
**解决**：提供3种方案

**最佳路径**：
```
尝试方案1 (AkShare)
  ↓ 如果失败
尝试方案2 (个股)
  ↓ 如果还失败
使用方案3 (现有5只)
```

**立即开始**：
```bash
# 推荐：方案1
pip install akshare
python get_stock_data_v6_akshare.py
python train_v6.py
```

**祝数据获取顺利！** 🚀📊💪



